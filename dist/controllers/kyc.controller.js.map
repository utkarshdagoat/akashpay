{"version":3,"sources":["../../src/controllers/kyc.controller.ts"],"sourcesContent":["import { RequestWithUser } from \"@/interfaces/auth.interface\";\nimport { KYCService } from \"@/services/kyc.service\";\nimport { NextFunction, Response  , Request} from \"express\";\nimport Container from \"typedi\";\n\n\nexport class KYCController{\n    public kyc = Container.get(KYCService);\n\n    public createKYC = async (req: Request, res: Response, next: NextFunction) => {\n        try {\n            const userId = req.body.userId;\n            const kycData = req.body.data;\n            const createKYC = await this.kyc.createKYC(kycData, userId);\n            res.status(201).json({ data: createKYC, message: 'KYC created' });\n        } catch (error) {\n            next(error);\n        }\n    }\n\n    public updateKYCStatus = async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        try {\n            const userId = req.user.id;\n            const { status } = req.body;\n            const updateStatus = await this.kyc.updateKycStatus(userId, status);\n            res.status(200).json({ data: updateStatus, message: 'KYC status updated' });\n        } catch (error) {\n            next(error);\n        }\n    }\n\n    public getKYC = async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        try {\n            const userId = req.user.id;\n            const kycStatus = await this.kyc.getKycStatus(userId);\n            res.status(200).json({ data: kycStatus, message: 'KYC status retrieved' });\n        } catch (error) {\n            next(error);\n        }\n    }\n}"],"names":["KYCController","kyc","Container","get","KYCService","createKYC","req","res","next","userId","body","kycData","data","status","json","message","error","updateKYCStatus","user","id","updateStatus","updateKycStatus","getKYC","kycStatus","getKycStatus"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAMaA;;;eAAAA;;;4BALc;iDAEL;;;;;;;;;;;;;;;;;;;AAGf,IAAA,AAAMA,gBAAN,MAAMA;;QACT,uBAAOC,OAAMC,eAAS,CAACC,GAAG,CAACC,sBAAU;QAErC,uBAAOC,aAAY,OAAOC,KAAcC,KAAeC;YACnD,IAAI;gBACA,MAAMC,SAASH,IAAII,IAAI,CAACD,MAAM;gBAC9B,MAAME,UAAUL,IAAII,IAAI,CAACE,IAAI;gBAC7B,MAAMP,YAAY,MAAM,IAAI,CAACJ,GAAG,CAACI,SAAS,CAACM,SAASF;gBACpDF,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEF,MAAMP;oBAAWU,SAAS;gBAAc;YACnE,EAAE,OAAOC,OAAO;gBACZR,KAAKQ;YACT;QACJ;QAEA,uBAAOC,mBAAkB,OAAOX,KAAsBC,KAAeC;YACjE,IAAI;gBACA,MAAMC,SAASH,IAAIY,IAAI,CAACC,EAAE;gBAC1B,MAAM,EAAEN,MAAM,EAAE,GAAGP,IAAII,IAAI;gBAC3B,MAAMU,eAAe,MAAM,IAAI,CAACnB,GAAG,CAACoB,eAAe,CAACZ,QAAQI;gBAC5DN,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEF,MAAMQ;oBAAcL,SAAS;gBAAqB;YAC7E,EAAE,OAAOC,OAAO;gBACZR,KAAKQ;YACT;QACJ;QAEA,uBAAOM,UAAS,OAAOhB,KAAsBC,KAAeC;YACxD,IAAI;gBACA,MAAMC,SAASH,IAAIY,IAAI,CAACC,EAAE;gBAC1B,MAAMI,YAAY,MAAM,IAAI,CAACtB,GAAG,CAACuB,YAAY,CAACf;gBAC9CF,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEF,MAAMW;oBAAWR,SAAS;gBAAuB;YAC5E,EAAE,OAAOC,OAAO;gBACZR,KAAKQ;YACT;QACJ;;AACJ"}