{"version":3,"sources":["../../src/utils/hmacSignUtil.ts"],"sourcesContent":["import crypto from 'crypto';\n\n\nexport class HmacUtil {\n  static hmac256(key:string, msg:string) {\n    const mac = crypto.createHmac('sha256', key);\n    const data = mac.update(msg).digest('hex').toLowerCase();\n    return data;\n  }\n\n  static getStringToSign(body: Record<string, any> ,nonce:string,timestamp:string , reqMethod:string, requestURI:string) {\n\n    const treeMap = new Map(Object.entries(body).sort());\n    let s2s = '';\n\n    for (const [k, v] of treeMap) {\n      if (!k || typeof v === 'object') {\n        continue;\n      }\n      if (v !== null && v !== undefined && String(v)) {\n        s2s += `${k}=${v}&`;\n      }\n    }\n\n    const bodyString =  s2s.slice(0, -1);\n    const CotentMd5 = crypto.createHash('md5').update(bodyString).digest('hex');\n    const stringToSign = reqMethod + '\\n' + CotentMd5 + '\\n'  + requestURI + '\\n' + timestamp + '\\n' + nonce ;\n    return stringToSign\n  }\n}"],"names":["HmacUtil","hmac256","key","msg","mac","crypto","createHmac","data","update","digest","toLowerCase","getStringToSign","body","nonce","timestamp","reqMethod","requestURI","treeMap","Map","Object","entries","sort","s2s","k","v","undefined","String","bodyString","slice","CotentMd5","createHash","stringToSign"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAGaA;;;eAAAA;;;iDAHM;;;;;;AAGZ,IAAA,AAAMA,WAAN,MAAMA;IACX,OAAOC,QAAQC,GAAU,EAAEC,GAAU,EAAE;QACrC,MAAMC,MAAMC,eAAM,CAACC,UAAU,CAAC,UAAUJ;QACxC,MAAMK,OAAOH,IAAII,MAAM,CAACL,KAAKM,MAAM,CAAC,OAAOC,WAAW;QACtD,OAAOH;IACT;IAEA,OAAOI,gBAAgBC,IAAyB,EAAEC,KAAY,EAACC,SAAgB,EAAGC,SAAgB,EAAEC,UAAiB,EAAE;QAErH,MAAMC,UAAU,IAAIC,IAAIC,OAAOC,OAAO,CAACR,MAAMS,IAAI;QACjD,IAAIC,MAAM;QAEV,KAAK,MAAM,CAACC,GAAGC,EAAE,IAAIP,QAAS;YAC5B,IAAI,CAACM,KAAK,OAAOC,MAAM,UAAU;gBAC/B;YACF;YACA,IAAIA,MAAM,QAAQA,MAAMC,aAAaC,OAAOF,IAAI;gBAC9CF,OAAO,CAAC,EAAEC,EAAE,CAAC,EAAEC,EAAE,CAAC,CAAC;YACrB;QACF;QAEA,MAAMG,aAAcL,IAAIM,KAAK,CAAC,GAAG,CAAC;QAClC,MAAMC,YAAYxB,eAAM,CAACyB,UAAU,CAAC,OAAOtB,MAAM,CAACmB,YAAYlB,MAAM,CAAC;QACrE,MAAMsB,eAAehB,YAAY,OAAOc,YAAY,OAAQb,aAAa,OAAOF,YAAY,OAAOD;QACnG,OAAOkB;IACT;AACF"}